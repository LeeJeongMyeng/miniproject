<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">


<mapper namespace="com.project.sample.dao.MemberDao">
    <select id="Check_SignUp_email" resultType="_int">
        select count(*) from ctg_member where email = #{email,jdbcType=VARCHAR}
    </select>


    <select id="Check_SignUp_name" parameterType="Member" resultType="_int">
        SELECT count(*) FROM CTG_MEMBER
            where NAME = #{name,jdbcType=VARCHAR}
            and PERSONALNUMBER = #{personalNumber,jdbcType=VARCHAR}
    </select>

    <insert id="Ins_Ctg_Member" parameterType="Member" >
        INSERT INTO CTG_MEMBER VALUES (
        CONCAT(DATE_FORMAT(SYSDATE(),'%Y%m%d'),'-',#{userno,jdbcType=VARCHAR},'-',nextval('seq_member')),
        #{email,jdbcType=VARCHAR},
        #{password,jdbcType=VARCHAR},
        #{name,jdbcType=VARCHAR},
        #{personalNumber,jdbcType=VARCHAR},
        #{phoneNumber,jdbcType=VARCHAR},
        #{postcode,jdbcType=NUMERIC},
        #{address,jdbcType=NUMERIC},
        <choose>
            <when test="extraAddress!=null"> #{extraAddress,jdbcType=NUMERIC},</when>
            <otherwise>NULL,</otherwise>
        </choose>
        #{detailAddress,jdbcType=NUMERIC},
        #{bnCheck,jdbcType=NUMERIC},
        TRUE,
        SYSDATE(),
        NULL
        );
    </insert>
</mapper>